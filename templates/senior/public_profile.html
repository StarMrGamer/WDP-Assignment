{% extends "base.html" %}

{% block body_class %}senior-dashboard{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="mb-4">
        <a href="javascript:history.back()" class="btn btn-outline-secondary btn-lg">
            <i class="fas fa-arrow-left me-2"></i>Back
        </a>
    </div>

    <div class="row">
        <div class="col-md-5 mb-4">
            <div class="card shadow-sm text-center p-4 border-2" style="border-color: var(--senior-border);">
                <img src="{{ url_for('static', filename=profile_user.profile_picture|fix_pfp) }}" class="rounded-circle mb-3 mx-auto d-block" style="width: 180px; height: 180px; object-fit: cover; border: 4px solid var(--senior-primary);">
                
                <h2 class="fw-bold mb-2">{{ profile_user.full_name }}</h2>
                <div class="mb-3">
                    {% if profile_user.role == 'senior' %}
                        <span class="badge bg-warning text-dark fs-6">Senior</span>
                    {% elif profile_user.role == 'youth' %}
                        <span class="badge bg-info text-white fs-6">Youth Volunteer</span>
                    {% else %}
                        <span class="badge bg-secondary fs-6">{{ profile_user.role|capitalize }}</span>
                    {% endif %}
                </div>
                
                {% if profile_user.bio %}
                    <p class="text-muted fs-5">{{ profile_user.bio }}</p>
                {% endif %}
                
                <div class="mt-4 p-3 bg-light rounded">
                    <h3 class="h2 fw-bold text-primary mb-0">{{ stories_count }}</h3>
                    <p class="text-muted mb-0">Stories Shared</p>
                </div>
                
                {% if profile_user.role == 'youth' and badges %}
                <div class="mt-3 p-3 bg-light rounded">
                    <h3 class="h2 fw-bold text-info mb-0">{{ badges|length }}</h3>
                    <p class="text-muted mb-0">Badges Earned</p>
                    <div class="d-flex flex-wrap justify-content-center gap-2 mt-2">
                        {% for badge in badges %}
                        <span class="fs-1" title="{{ badge.title }}">{{ badge.icon }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        
        <div class="col-md-7">
            <div class="card shadow-sm mb-4 border-2" style="border-color: var(--senior-border);">
                <div class="card-header bg-white border-bottom-2" style="border-color: var(--senior-border);">
                    <h3 class="h4 mb-0">About</h3>
                </div>
                <div class="card-body p-4">
                    <div class="mb-4">
                        <label class="text-muted d-block mb-1">Age</label>
                        <p class="fs-4 fw-bold">{{ profile_user.age }} years old</p>
                    </div>
                    
                    <div class="mb-4">
                        <label class="text-muted d-block mb-2">Interests</label>
                        {% if profile_user.interests %}
                            <div class="d-flex flex-wrap gap-2">
                            {% for interest in profile_user.interests %}
                                <span class="badge bg-light text-dark border border-2 p-2 fs-6">{{ interest }}</span>
                            {% endfor %}
                            </div>
                        {% else %}
                            <p class="text-muted fst-italic">No interests listed</p>
                        {% endif %}
                    </div>
                    
                    <div class="mb-4">
                        <label class="text-muted d-block mb-2">Languages</label>
                        {% if profile_user.languages %}
                            <div class="d-flex flex-wrap gap-2">
                            {% for lang in profile_user.languages %}
                                <span class="badge bg-light text-dark border border-2 p-2 fs-6">{{ lang }}</span>
                            {% endfor %}
                            </div>
                        {% else %}
                            <p class="text-muted fst-italic">No languages listed</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            {% if recent_stories %}
            <div class="card shadow-sm border-2" style="border-color: var(--senior-border);">
                <div class="card-header bg-white border-bottom-2" style="border-color: var(--senior-border);">
                    <h3 class="h4 mb-0">Recent Stories</h3>
                </div>
                <div class="list-group list-group-flush">
                    {% for story in recent_stories %}
                    <div class="list-group-item p-4">
                        <h4 class="mb-2 fw-bold">{{ story.title }}</h4>
                        <p class="mb-2 text-muted">{{ story.content[:150] }}...</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="badge bg-primary bg-opacity-10 text-primary">{{ story.category }}</span>
                            <small class="text-muted">{{ story.created_at|timeago }}</small>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}